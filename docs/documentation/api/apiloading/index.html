<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Loading Using the API · bmlSUP</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Using the c# scripting api, bmlSUP can easily load AMASS animations inside your own scripts and projects."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Loading Using the API · bmlSUP"/><meta property="og:type" content="website"/><meta property="og:url" content="https://BioMotionLab.github.io/SUP/"/><meta property="og:description" content="Using the c# scripting api, bmlSUP can easily load AMASS animations inside your own scripts and projects."/><meta property="og:image" content="https://BioMotionLab.github.io/SUP/img/SUP_icon.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://BioMotionLab.github.io/SUP/img/SUP_icon.png"/><link rel="shortcut icon" href="/SUP/img/favicon.ico"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/SUP/js/scrollSpy.js"></script><link rel="stylesheet" href="/SUP/css/main.css"/><script src="/SUP/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/SUP/"><img class="logo" src="/SUP/img/favicon.ico" alt="bmlSUP"/><h2 class="headerTitleWithLogo">bmlSUP</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/SUP/docs/GettingStarted" target="_self">Documentation</a></li><li class="siteNavGroupActive"><a href="/SUP/docs/Installation" target="_self">Install</a></li><li class="siteNavGroupActive"><a href="/SUP/docs/Publication" target="_self">Publication</a></li><li class="siteNavGroupActive"><a href="/SUP/docs/Troubleshooting" target="_self">Help</a></li><li class=""><a href="https://www.biomotionlab.ca" target="_self">BioMotionLab</a></li><li class=""><a href="https://github.com/BioMotionLab/SUP" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>C# Scripting API</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/SUP/docs/GettingStarted">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/SUP/docs/Installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/SUP/docs/Publication">Publication</a></li><li class="navListItem"><a class="navItem" href="/SUP/docs/Overview">Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Documentation<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/SUP/docs/documentation/Converting">Converting to Unity-Readable Format</a></li><li class="navListItem"><a class="navItem" href="/SUP/docs/documentation/playbackmodes">Playback Modes</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">GUI Viewer</h4><ul><li class="navListItem"><a class="navItem" href="/SUP/docs/documentation/gui/guiloading">Loading using the GUI</a></li><li class="navListItem"><a class="navItem" href="/SUP/docs/documentation/gui/interface">GUI Viewer Interface</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">C# Scripting API</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/SUP/docs/documentation/api/apiloading">Loading Using the API</a></li><li class="navListItem"><a class="navItem" href="/SUP/docs/documentation/api/apiplayback">Playback Using the API</a></li></ul></div><li class="navListItem"><a class="navItem" href="/SUP/docs/documentation/customsettings">Customizing Settings</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Help<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/SUP/docs/Troubleshooting">Troubleshooting</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 id="__docusaurus" class="postHeaderTitle">Loading Using the API</h1></header><article><div><span><p>Using the c# scripting api, bmlSUP can easily load AMASS animations inside your own scripts and projects.</p>
<h3><a class="anchor" aria-hidden="true" id="defining-an-animation-list"></a><a href="#defining-an-animation-list" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Defining an animation list</h3>
<p>The easiest way to load animations is by first creating an AnimationList Asset, and then dragging animation files to it in the inspector.</p>
<ol>
<li>Create the asset by right clicking on your Assets folder, select Create &gt; bmlSUP &gt; New AnimationList Asset.</li>
<li>The asset will appear in your Assets folder. Click it.</li>
<li>In its inspector you can add new entries, then drag the animation .json files into place.</li>
</ol>
<p>The structure of the asset might be confusing at first. There are lists within lists. This is to allow animations to be grouped into sets that play simultaneously. This is essential for paired motion capture such as two people dancing.</p>
<p>In the assets inspector, you can add entries first to create new sets, then inside each set, create new entries for each animation.</p>
<p>The following image shows a sample. There are 5 animation sets. The final set contains two paired animations, which are of two women dancing together. This paired set was recorded from simultaneous motion capture of two people.</p>
<p><img src="../../assets/api/animationlistasset.png" alt="listasset"></p>
<p>The list asset requires references to default playback settings and models to load from. These should already be populated, and can be overwritten later.</p>
<p>Once the list asset has been created, calling methods from the <code>SUPLoader</code> class will load these animations into memory.</p>
<pre><code class="hljs css language-c#">SUPLoader.LoadFromListAssetAsync(animationListAsset, DoneLoading);
</code></pre>
<p>This function takes a reference to the animation List Asset, as well as a function (<code>DoneLoading</code>) to run when it is done loading.</p>
<p>Passing a function as an argument is common with asynchronous programming. This is an advanced topic, but in a nutshell, this enables your program to continue running while it's loading, then calls the function when complete to allow you to continue your setup. This prevents hangs and freezes to the user while loading.</p>
<p>The <code>DoneLoading</code> method needs to take a list of animation sets as a parameter, so that the program can pass the loaded result back to you. like so:</p>
<pre><code class="hljs css language-c#"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">DoneLoading</span>(<span class="hljs-params">List&lt;List&lt;AMASSAnimation&gt;&gt; loadedAnimations</span>)</span> {
    <span class="hljs-keyword">this</span>.animations = loadedAnimations;
}
</code></pre>
<p>All this method does is store the loaded animations in a field. Later on you can iterate through this list and play each one. See the <a href="/SUP/docs/documentation/api/apiplayback">playback section</a> for a complete working example.</p>
<h3><a class="anchor" aria-hidden="true" id="loading-directly-from-the-file-system"></a><a href="#loading-directly-from-the-file-system" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Loading directly from the file system</h3>
<p>Loading via an AnimationList asset is by far the easiest and least error-prone way to load animations, advanced users can also load via the file system.</p>
<p>It works in a similar way, except that you have to first create an <code>AnimationFileReference</code> object. This must be passed a valid path to a folder on your hard drive containing animations.</p>
<p>By default it will play all animations individually in the specified folder. However, users can optionally pass a path to a <code>.txt</code> file that contains a list of ordered and grouped animations to play. For more information on creating these text files see <a href="/SUP/docs/documentation/gui/guiloading">this page</a></p>
<pre><code class="hljs css language-c#"><span class="hljs-comment">// File reference to all animations in a folder and its subfolders.</span>
AnimationFileReference fileReference = <span class="hljs-keyword">new</span> AnimationFileReference(animationsFolder);

<span class="hljs-comment">// File reference to animations in a folder to be ordered and grouped into sets according to the listFile.</span>
AnimationFileReference fileReference = <span class="hljs-keyword">new</span> AnimationFileReference(animationsFolder, listFile);

</code></pre>
<p>Once a file reference has been created we can load the animations into memory. We need to define a Models object and a Playback settings to make sure the loader loads the proper models and playback settings. These can be set via the unity inspector via <code>[SerializedFields]</code> Use the default objects unless you know what you're doing.</p>
<pre><code class="hljs css language-c#">SUPLoader.LoadAsync(fileReference, models, playbackSettings, DoneLoading);
</code></pre>
<p>Similar to above we also need to pass it a <code>DoneLoading</code> method that fires when loading is complete.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/SUP/docs/documentation/gui/interface"><span class="arrow-prev">← </span><span>GUI Viewer Interface</span></a><a class="docs-next button" href="/SUP/docs/documentation/api/apiplayback"><span>Playback Using the API</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/SUP/" class="nav-home"><img src="/SUP/img/favicon.ico" alt="bmlSUP" width="66" height="58"/></a><div><h5>bmlSUP</h5><a href="/SUP/docs/en/GettingStarted.html">Documentation</a><a href="/SUP/docs/en/Installation.html">Install</a><a href="https://github.com/BioMotionLab/SUP">GitHub</a></div><div><h5>BioMotionLab</h5><a href="https://www.biomotionlab.ca/">Website</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/SUP/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2021 BioMotionLab (A.O. Bebko, A. Thaler, &amp; N.F. Troje)</section></footer></div></body></html>